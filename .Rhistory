trt <- as.character(my_groups$sub_grp)
# There is significant dispersion within groups, and groups are unbalanced --- cannot use MANOVA (adonis)
anova(betadisper(d, trt))
mod <- betadisper(d, trt)
TukeyHSD(mod)
boxplot(mod)
plot(mod)
# Best option is MRPP
# The key idea is simple: if groups differ, the mean within-group dissimilarity should be smaller
# than the mean dissimilarity among randomly selected groups of the same size.
# Sort of low effect size but groups are meaningful!
results <- mrpp(d, grouping = sub_grp, permutations = 999)
results
results
results
# Best option is MRPP
# The key idea is simple: if groups differ, the mean within-group dissimilarity should be smaller
# than the mean dissimilarity among randomly selected groups of the same size.
# Sort of low effect size but groups are meaningful!
results <- mrpp(d, grouping = sub_grp, permutations = 999)
results
knitr::opts_chunk$set(echo = TRUE)
# Packages
library(tidyverse) # includes ggplot2, dplyr, tidyr, readr, purr, tibble, stringr, forcats
library(vegan)
library(here)
library(readxl)
# library(ggpubr) # customize ggplot2 for publication
# library(broom)
# library(AICcmodavg)
# library(janitor)
# library(multcompView)
# library(plotly)
# if (!require(devtools)) {
#   install.packages("devtools")
# }
# devtools::install_github("gavinsimpson/ggvegan")
# library(ggpmisc)
# load colors
# library(calecopal)
# Stand colors: INTACT, MATRIX, DEGRADED
# cal_palette(name = "chaparral3", n = 3, type = "continuous")
# deg <- "#D3E3CA"
# mat <- "#92A587"
# int <- "#2F3525"
# standcolors <- c(int, mat, deg)
#
# # Lifeform colors: shrub, grass, forb
# cal_palette(name = "chaparral3", n = 3, type = "continuous")
# shrub <- "#D3E3CA"
# grass <- "#92A587"
# forb <- "#2F3525"
# lifeformcolors <- c(int, mat, deg)
#
# # Status colors: native, exotic
# cal_palette(name = "chaparral1", n = 6, type = "continuous")
# native <- "#AEBFA8"
# exotic <- "#F19B34"
# statuscolors <- c(native, exotic)
# Read in data
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt_spp_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
belt.spprich_total <- belt.spprich %>%
filter(species != "Erodium spp.") %>%
filter(species != "Galium spp.") %>%
filter(species != "Lupinus spp.") %>%
filter(species != "Phacelia spp.") %>%
filter(species != "Trifolium spp.")
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt_spp_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
list <- belt.spprich %>%
full_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
a
b
difbelt <- setdiff(a, b)
difbelt
difchar <- setdiff(b, a)
difchar
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
view(difbelt)
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
sort(unique(belt.spp_2019$species))
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
list <- belt.spprich %>%
full_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
difbelt <- setdiff(a, b)
difbelt
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
list <- belt.spprich %>%
full_join(sppchar, by = "species")
sppchar <- read.csv("processed/specieslist.csv")
view(sppchar)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
view(belt.spp_2019)
view(belt.spp_2024)
list <- belt.spprich %>%
full_join(sppchar, by = "species")
view(belt.spprich)
view(sppchar)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
list <- belt.spprich %>%
full_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
difbelt <- setdiff(a, b)
difbelt
difchar <- setdiff(b, a)
difchar
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
difbelt <- setdiff(a, b)
difbelt
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
sppchar <- read.csv("processed/specieslist.csv")
sppchar
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X))
sppchar
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes))
sppchar
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
sppchar
list <- belt.spprich %>%
full_join(sppchar, by = "species")
list
list <- belt.spprich %>%
left_join(sppchar, by = "species")
list
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
view(list)
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
list
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
difchar <- setdiff(b, a)
difchar
speciesmissingfrom.belt <- setdiff(b, a)
speciesmissingfrom.belt <- setdiff(b, a)
speciesmissingfrom.belt
view(a)
view(b)
b
knitr::opts_chunk$set(echo = TRUE)
# Packages
library(tidyverse) # includes ggplot2, dplyr, tidyr, readr, purr, tibble, stringr, forcats
library(vegan)
library(here)
library(readxl)
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
speciesmissingfrom.belt <- setdiff(b, a)
speciesmissingfrom.belt
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
speciesmissingfrom.belt <- setdiff(b, a)
speciesmissingfrom.belt
view(a)
view(b)
a
b
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
speciesmissingfrom.sppchar
speciesmissingfrom.belt
speciesmissingfrom.sppchar
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
sppchar
view(belt.spprich)
view(list)
list
view(list)
knitr::opts_chunk$set(echo = TRUE)
# Packages
library(tidyverse) # includes ggplot2, dplyr, tidyr, readr, purr, tibble, stringr, forcats
library(vegan)
library(here)
library(readxl)
# library(ggpubr) # customize ggplot2 for publication
# library(broom)
# library(AICcmodavg)
# library(janitor)
# library(multcompView)
# library(plotly)
# if (!require(devtools)) {
#   install.packages("devtools")
# }
# devtools::install_github("gavinsimpson/ggvegan")
# library(ggpmisc)
# load colors
# library(calecopal)
# Stand colors: INTACT, MATRIX, DEGRADED
# cal_palette(name = "chaparral3", n = 3, type = "continuous")
# deg <- "#D3E3CA"
# mat <- "#92A587"
# int <- "#2F3525"
# standcolors <- c(int, mat, deg)
#
# # Lifeform colors: shrub, grass, forb
# cal_palette(name = "chaparral3", n = 3, type = "continuous")
# shrub <- "#D3E3CA"
# grass <- "#92A587"
# forb <- "#2F3525"
# lifeformcolors <- c(int, mat, deg)
#
# # Status colors: native, exotic
# cal_palette(name = "chaparral1", n = 6, type = "continuous")
# native <- "#AEBFA8"
# exotic <- "#F19B34"
# statuscolors <- c(native, exotic)
# Read in data
# 2019 belt transect data
belt.spp_2019_load <- read.csv(here("deg_beltdensity_byspecies.csv"))
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b)
speciesmissingfrom.sppchar
speciesmissingfrom.belt <- setdiff(b, a)
speciesmissingfrom.belt
# list of seven unknown species
unknown.spp <- read_excel("unknown_spp.xlsx")
a
str(a)
str(b)
str(sppchar)
str(belt.spprich)
belt.spprich_total <- belt.spprich %>%
filter(species != "Erodium spp.") %>%
filter(species != "Galium spp.") %>%
filter(species != "Lupinus spp.") %>%
filter(species != "Phacelia spp.") %>%
filter(species != "Trifolium spp.")
length(unique(belt.spprich_total$species))
a
b
speciesmissingfrom.sppchar <- setdiff(a, b) # <- KIT - can you help resolve this issue? I added the missing species and their characteristics to "processed/specieslist.csv" but
speciesmissingfrom.sppchar
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
sppchar
list <- belt.spprich %>%
left_join(sppchar, by = "species")
list
view(list)
view(belt.spp_2019)
belt\
belt.spp_2019
belt.spp_2019 %>%  filter(species == "Eucrypta")
belt.spp_2019 <- belt.spp_2019_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
mutate(species = case_when(species == "Bromus madritensis" ~ "Bromus rubens", # old name ~ new name
species == "Eucrypta\xcachrysanthemifolia" ~ "Eucrypta chrysanthemifolia",
TRUE ~ species))
### 2024 belt transect data
belt.spp_2024_load <- read.csv(here("belt_spprich_2024.csv"))
belt.spp_2024 <- belt.spp_2024_load %>%
dplyr::select(site, rep, species) %>%
mutate(site_rep = paste(site, rep, sep = ".")) %>%
filter(species != "moss")
belt.spprich <- bind_rows(belt.spp_2019, belt.spp_2024)
### species characteristics
sppchar <- read.csv("processed/specieslist.csv") %>% # species and their characteristics :) Created in 1.1_transect_continuous.Rmd
dplyr::select(!c(X, notes, ejepson))
list <- belt.spprich %>%
left_join(sppchar, by = "species")
#These are the species that are in belt.spprich that are NOT in the species characteristics list
a <- sort(unique(belt.spprich$species))
b <- sort(unique(sppchar$species))
speciesmissingfrom.sppchar <- setdiff(a, b) # <- KIT - can you help resolve this issue? I added the missing species and their characteristics to "processed/specieslist.csv" but they're not joining
speciesmissingfrom.sppchar
knitr::opts_chunk$set(echo = TRUE)
extracted_load <- read.csv("~/Dropbox/GRADSCHOOL/Dissertation/R_dissertation/chaparraldegradation_2022/chaparraldegradation_2022/Extracted_Elevation_Slope_Aspect_Hillshade_20m.csv", header = TRUE, na.strings=c("","NA"))
extracted_load
view(extracted_load)
