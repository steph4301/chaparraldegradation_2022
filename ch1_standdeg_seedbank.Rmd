---
title: "ch1_standdeg_seedbank"
author: "Stephanie Ma Lucero"
date: "2023-07-30"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r load seedbank data, include=TRUE}

# STAND COMPARISONS BY SEEDBANK SPECIES RICHNESS AND GERMINATION COUNTS - OMIT Zeros
# 1. species richness - use "species_richness" column 
# 2. native species richness - filter status == "native"
# 3. germination abundance - "genus_abundance" column and "count" column
# 4. germination of fire followers - ask Rob how he would select for not present in CK but present in treated tray.


seedbank_load_raw <- read.csv("~/Dropbox/GRADSCHOOL/Dissertation/R_dissertation/chaparraldegradation_2022b/deg_seedbank_20230801.csv", header = TRUE, na.strings=c("","NA"))

charate_spp = seedbank_load_raw$species_diversity[seedbank_load_raw$treatment=="charate"]
control_spp = seedbank_load_raw$species_diversity[seedbank_load_raw$treatment=="control"]
oven_spp = seedbank_load_raw$species_diversity[seedbank_load_raw$treatment=="oven"]
ovenchar_spp = seedbank_load_raw$species_diversity[seedbank_load_raw$treatment=="ovenchar"]

firefollowers = unique(c(charate_spp, oven_spp, ovenchar_spp))

fire_only = tibble(firefollowers[!firefollowers %in% control_spp])
control_df = tibble(control_df)

head(seedbank_load_raw)
str(seedbank_load_raw)

seedbank_load <- seedbank_load_raw %>% 
  select(c("stand", "site", "soilcore", "depthname", "treatment", "species", "lifeform", "status", "lifecycle", "family", "totalcount"))
  
seedbank_load$totalcount <- as.numeric(seedbank_load$totalcount)
str(seedbank_load)

# load without unknowns and NAs <-- how do I omit UNKNOWNs?
seedbank_load %>%
  filter(!str_detect(species, "unk"), 
         !str_detect(species, "Typha spp.")) 

# rename treatments to be all lowercase 
seedbank_load <- seedbank_load %>% 
  mutate(treatment = recode(treatment,
                            Oven = 'oven',
                            Ovenchar = 'ovenchar',
                            Char = 'char',
                            Control = 'control', 
                            Native = 'native')
                            ) 
  
         
print(seedbank_load)
unique(seedbank_load$stand)
unique(seedbank_load$site)
unique(seedbank_load$soilcore)
unique(seedbank_load$depthname)
unique(seedbank_load$treatment)
unique(seedbank_load$species)
seedbank_load <- seedbank_load %>% 
  filter(species != "Typha spp. ") # will omit Typha

seedbank_load <- seedbank_load[seedbank_load$species != "Typha spp. ", ] # will remove Typha from the df

view(seedbank_load)

```